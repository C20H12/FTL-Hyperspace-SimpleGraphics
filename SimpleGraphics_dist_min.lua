(function()
  SimpleSprite={_isShowing=true,_timer=0,_shouldHide=false,_texture=nil,_state="off",new=function(self,a)local b={imgName=a}self.__index=self;self._texture=Hyperspace.Resources:GetImageId(a..".png")return setmetatable(b,self)end,_processModifiers=function(self,c)local d=c.width or self._texture.width;local e=c.height or self._texture.height;local f=1280/2-d/2+(c.Xalign or 0)local g=720/2-e/2-(c.Yalign or 0)local h=c.rotation or 0;local i=c.color or Graphics.GL_Color(1,1,1,1)local j=c.isMirror or false;local k={f,g,d,e,h,i,j}return k end,toggleState=function(self)if self._state=="off"then self._state="on"else self._state="off"end end,getState=function(self)return self._state end,show=function(self,c)if not self._isShowing then return end;c=c or{}local l=self:_processModifiers(c)Graphics.CSurface.GL_BlitImage(self._texture,table.unpack(l))end,hide=function(self)local m=self._timer~=0;if self._shouldHide or not m then self._isShowing=false;self._shouldHide=false end end,wait=function(self,n)if not self._isShowing then return n+1 end;self._timer=self._timer+Hyperspace.FPS.SpeedFactor/16;if self._timer>n then self._shouldHide=true end;return self._timer end,reset=function(self)self._timer=0;self._isShowing=true;self._shouldHide=false end,colorFactory=function(o,p,q,r)local s,t,u,v;if type(o)=="string"then s=tonumber(o:sub(1,2),16)/255;t=tonumber(o:sub(3,4),16)/255;u=tonumber(o:sub(5,6),16)/255;v=tonumber(o:sub(7,8),16)/255 else s=o/255;t=p/255;u=q/255;v=r end;return Graphics.GL_Color(s,t,u,v)end,randint=function(w,x)return Hyperspace.random32()%(x+1-w)+w end}SimpleAnimatedSprite=SimpleSprite:new('null')SimpleAnimatedSprite._waitTimer=0;SimpleAnimatedSprite.new=function(self,a,y,z)local b=SimpleSprite.new(self,a)b.frameCount=y;b.rows=z or 1;self.__index=self;return setmetatable(b,self)end;SimpleAnimatedSprite._processModifiers=function(self,c)local d=c.width or self._texture.width/self.frameCount;local e=c.height or self._texture.height/self.rows;local f=1280/2-d/2+(c.Xalign or 0)local g=720/2-e/2-(c.Yalign or 0)local i=c.color or Graphics.GL_Color(1,1,1,1)local j=c.isMirror or false;local k={f,g,d,e,i,j}return k end;SimpleAnimatedSprite._renderAnim=function(self,A,B)local C=A/self.frameCount;local D=(A+1)/self.frameCount;Graphics.CSurface.GL_BlitImagePartial(self._texture,B[1],B[2],B[3],B[4],C,D,1,0,1,B[5],B[6])end;SimpleAnimatedSprite._renderMultilineAnim=function(self,A,B)local E=math.floor(A/self.frameCount)local F=A%self.frameCount;local G=F/self.frameCount;local H=(F+1)/self.frameCount;local I=E/self.rows;local J=(E+1)/self.rows;Graphics.CSurface.GL_BlitImagePartial(self._texture,B[1],B[2],B[3],B[4],G,H,I,J,1,B[5],B[6])end;SimpleAnimatedSprite.show=function(self,K,c)if not self._isShowing then return true end;self._timer=self._timer+Hyperspace.FPS.SpeedFactor/16;local L=math.floor(self._timer*self.frameCount/K)local c=c or{}local M=self:_processModifiers(c)if self.rows==1 then self:_renderAnim(L,M)else self:_renderMultilineAnim(L,M)end;if L>=self.frameCount*self.rows then self._isShowing=false end;return false end;SimpleAnimatedSprite.hide=function(self)local m=self._waitTimer~=0;if self._shouldHide or not m then self._isShowing=false;self._shouldHide=false end end;SimpleAnimatedSprite.wait=function(self,n)if self._shouldHide then return end;self._waitTimer=self._waitTimer+Hyperspace.FPS.SpeedFactor/16;if self._waitTimer>n then self._shouldHide=true end end;SimpleShape=SimpleSprite:new("null")SimpleShape.new=function(self,N)local b={shape=N}self.__index=self;return setmetatable(b,self)end;SimpleShape._renderRect=function(c)local d=c.width or 0;local e=c.height or 0;local f=1280/2-d/2+(c.Xalign or 0)local g=720/2-e/2-(c.Yalign or 0)local i=c.color or Graphics.GL_Color(1,1,1,1)local O=c.borderColor or Graphics.GL_Color(1,1,1,1)local P=c.borderWidth or 0;Graphics.CSurface.GL_DrawRect(f,g,d,e,i)Graphics.CSurface.GL_DrawRectOutline(f,g,d,e,O,P)end;SimpleShape._renderTriangle=function(c)local Q={1280/2,720/2}local R={}for S=1,3 do c["point"..S]=c["point"..S]or Q;R[S]=Hyperspace.Point(Q[1]+c["point"..S][1],Q[2]-c["point"..S][2])end;local i=c.color or Graphics.GL_Color(1,1,1,1)Graphics.CSurface.GL_DrawTriangle(R[1],R[2],R[3],i)end;SimpleShape.show=function(self,c)if not self._isShowing then return end;if self.shape=="rect"then self._renderRect(c)elseif self.shape=="triangle"then self._renderTriangle(c)else error("Unknown shape: "..self.shape)end end
end)()